#
# AR71XX -- Kernel configuration file for FreeBSD/mips for Atheros 71xx systems
#
# $FreeBSD: head/sys/mips/conf/AR71XX 202172 2010-01-12 20:55:12Z rpaulo $
#

machine         mips mipseb
ident		TP-WN1043ND
cpu		CPU_MIPS4KC
options 	ISA_MIPS32
makeoptions	KERNLOADADDR=0x80050000
options		HZ=1000

# I'm a 1043ND!
#options		ATHEROS_BOARD_WN_TR1043ND

# Override memory - there's no hooks in uboot just yet
options		AR71XX_REALMEM=32*1024*1024

files		"../atheros/files.ar71xx"
hints		"TP-WN1043ND.hints"

makeoptions	DEBUG=-g		#Build kernel with gdb(1) debug symbols
makeoptions	MODULES_OVERRIDE="wlan wlan_ccmp wlan_tkip wlan_xauth wlan_wep ath ath_ahb"

options		DDB
options		KDB

options		SCHED_4BSD		#4BSD scheduler
options		INET			#InterNETworking
options		INET6			#InterNETworking
options		NFSCLIENT		#Network Filesystem Client
options		PSEUDOFS		#Pseudo-filesystem framework
options		_KPOSIX_PRIORITY_SCHEDULING #Posix P1003_1B real-time extensions

# options		NFS_LEGACYRPC
# Debugging for use in -current
# options		INVARIANTS
# options		INVARIANT_SUPPORT
# options		WITNESS
# options		WITNESS_SKIPSPIN
options         FFS                     #Berkeley Fast Filesystem
options         SOFTUPDATES             #Enable FFS soft updates support
options         UFS_ACL                 #Support for access control lists
options         UFS_DIRHASH             #Improve performance on big directories


#device		pci

# Wireless NIC cards
options		IEEE80211_DEBUG
options		IEEE80211_SUPPORT_MESH
options		IEEE80211_SUPPORT_TDMA
#device		wlan            # 802.11 support
#device		wlan_wep        # 802.11 WEP support
#device		wlan_ccmp       # 802.11 CCMP support
#device		wlan_tkip       # 802.11 TKIP support
#device		wlan_xauth	# 802.11 hostap support

# This will come later -adrian
#device		ath             # Atheros pci/cardbus NIC's
options 	ATH_DEBUG
options		ATH_DIAGAPI
options		AH_DEBUG
#device		ath_hal
option		AH_SUPPORT_AR5416
option		AH_RXCFG_SDMAMW_4BYTES  # See NOTES for details of this WAR
option		AH_NEED_DESC_SWAP	# ?
#device		ath_rate_sample
#device		ath_ahb
option		AH_AR5416_INTERRUPT_MITIGATION

device		mii
device		arge

# USB is currently busted
device		usb
options		USB_EHCI_BIG_ENDIAN_DESC        # handle big-endian byte order
options		USB_DEBUG
options		USB_HOST_ALIGN=32		# AR71XX (MIPS in general?) requires this
device		ehci

device		scbus
device		umass
device		da

device		spibus
device		ar71xx_spi
device		mx25l
device		ar71xx_wdog

device		uart

device		loop
device		ether
device		md
device		bpf
device		random
device		if_bridge

# read MSDOS formatted disks
options		MSDOSFS
options		GEOM_PART_BSD
options		GEOM_PART_MBR

# Just make sure the thing boots off of the first attached SCSI device for now!
#options		ROOTDEVNAME=\"ufs:da0a\"
# MD root, because! -adrian
options		MD_ROOT
options		MD_ROOT_SIZE=5120
device		geom_uzip
options		GEOM_UZIP
options		ROOTDEVNAME=\"ufs:/dev/md0.uzip\"
