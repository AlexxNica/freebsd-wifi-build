#
# AR71XX -- Kernel configuration file for FreeBSD/mips for Atheros 71xx systems
#
# $FreeBSD: head/sys/mips/conf/AR71XX 202172 2010-01-12 20:55:12Z rpaulo $
#

machine		mips mipseb
ident		UBNT_AR71XX_BASE
cpu		CPU_MIPS4KC
options 	ISA_MIPS32
makeoptions	TARGET_BIG_ENDIAN
makeoptions	KERNLOADADDR=0x80050000
options		HZ=1000

files		"../atheros/files.ar71xx"

# For now, hints are per-board.

hints		"UBNT_AR71XX_BASE.hints"

makeoptions	DEBUG=-g		#Build kernel with gdb(1) debug symbols

# Don't build any modules for now; the consumers of this file can override
# this again to build modules specific for the given board.
makeoptions	MODULES_OVERRIDE=""

options		DDB
options		KDB

options		SCHED_4BSD		#4BSD scheduler
options		INET			#InterNETworking

# options		NFSCLIENT		#Network Filesystem Client

options		PSEUDOFS		#Pseudo-filesystem framework
options		_KPOSIX_PRIORITY_SCHEDULING #Posix P1003_1B real-time extensions

# options		NFS_LEGACYRPC
# Debugging for use in -current
# options		INVARIANTS
# options		INVARIANT_SUPPORT
# options		WITNESS
# options		WITNESS_SKIPSPIN

options         FFS                     #Berkeley Fast Filesystem
# options         SOFTUPDATES             #Enable FFS soft updates support
# options         UFS_ACL                 #Support for access control lists
# options         UFS_DIRHASH             #Improve performance on big directories
options		MSDOSFS			# Read MSDOS filesystems; useful for USB/CF

device		pci

# 802.11 framework
options		IEEE80211_DEBUG
options		IEEE80211_SUPPORT_MESH
options		IEEE80211_SUPPORT_TDMA
options		IEEE80211_AMPDU_AGE
device		wlan            # 802.11 support
device		wlan_wep        # 802.11 WEP support
device		wlan_ccmp       # 802.11 CCMP support
device		wlan_tkip       # 802.11 TKIP support
device		wlan_xauth	# 802.11 hostap support

# Atheros wireless NICs
device		ath             # Atheros interface support
# XXX not yet -adrian
# device		ath_pci		# Atheros PCI/Cardbus bus
options 	ATH_DEBUG
options		ATH_DIAGAPI
options		ATH_ENABLE_11N
options		AH_DEBUG
options		AH_DEBUG_ALQ
options		ALQ
device		ath_hal
option		AH_SUPPORT_AR5416
device		ath_rate_sample
option          AH_RXCFG_SDMAMW_4BYTES

device		mii
device		arge

device		usb
options		USB_EHCI_BIG_ENDIAN_DESC        # handle big-endian byte order
options		USB_DEBUG
options		USB_HOST_ALIGN=32		# AR71XX (MIPS in general?) requires this
device		ehci

device		scbus
device		umass
device		da

device		spibus
device		ar71xx_spi
device		mx25l
device		geom_redboot
device		ar71xx_wdog
# RTC - requires hackery in the spibus code to work
device		pcf2123_rtc

# GEOM modules
device		geom_redboot			# to get access to the SPI flash partitions
device		geom_uzip			# compressed in-memory filesystem hackery!
options		GEOM_UZIP

options		GEOM_PART_BSD
options		GEOM_PART_MBR
# read MSDOS formatted disks

device		uart

device		loop
device		ether
device		md
device		bpf
device		random
device		if_bridge
device		gif		# ip[46] in ip[46] tunneling protocol
device		gre		# generic encapsulation - only for IPv4 in IPv4 though atm


