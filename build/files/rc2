#!/bin/sh

# This is run once rc has setup /tmp, /etc and /var; it's our
# responsibility to set things up to run.

# Directories
echo "*** Populating /var .."

mkdir -p /var/run/hostapd
mkdir -p /var/log
mkdir -p /var/tmp
mkdir -p /var/db
mkdir -p /var/empty
mkdir -p /var/cron
mkdir -p /var/cron/tabs

echo "*** setting up (default) hostname"
/bin/hostname unknown

# Bring up loopback
echo "*** bringing up loopback .."
/sbin/ifconfig lo0 inet 127.0.0.1/8 up

echo "*** Default password/login databases .."
/usr/sbin/pwd_mkdb /etc/master.passwd
/usr/bin/cap_mkdb /etc/login.conf

# At this point, the configuration should be read from the
# flash partition

echo "*** inetd"
/usr/sbin/inetd

echo "*** Done!"
exit 0
